<!DOCTYPE html>
<html>

<head lang="en">
    <title>Tale Miner</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    <script src='https://cdn.plot.ly/plotly-2.9.0.min.js'></script>
    <!-- CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" type="text/css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- JavaScript -->
    <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"
        integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/script.js') }}">    </script>


</head>

<body class="container-fluid">
    <div class="container">
        <nav class="navbar navbar-expand-lg navbar-dark navbar-light">
            <span class="navbar-brand">Tale Analysis</span>
        </nav>
        <div id="parameters">
            <div class="row">
                <div class="col">
                    <form action="/select/logs" method="POST" enctype="multipart/form-data">
                        <div class="col"><label for="file">Select Event Log Files</label>
                            <input class="btn btn-outline-secondary" type="file" name="file" multiple />
                        </div>
                        <div class="col"><input class="btn btn-outline-secondary" type="submit" type="button"
                                value="Upload" /> </div>
                    </form>

                </div>
                <div class="col">
                    <button class="btn btn-outline-secondary" onclick="csvParser()">CSV parser</button>
                </div>
                <div id="generated_xes_name" class="col"> </div>
            </div>
            <!--<button onclick="toggleFullScreen()">Toggle fullscreen</button>-->
            {% if files %}
            <div class="row">
                <table id="files-table">
                    <tr>
                        <th>File name</th>
                        <th></th>
                        <th></th>
                    </tr>
                    {% for value in files %}
                    <tr>
                        <td> {{ value }}</td>
                        <td>
                            <form action="/filter" method="POST">
                                <input hidden name="file_name" value="{{value}}" />
                                <input class='btn btn-outline-dark' type="submit" value="Filter by Resource" />
                            </form>
                        </td>
                        {% if resources%}
                        <td>
                            <iframe name="dummy" style="display:none;"></iframe>
                            <form method="POST" action="/filter/resource" class="form-group" target="dummy">
                                <select class="custom-select" name="option" id="selectRes">
                                {% for resource in resources %}
                                <option value="{{resource}}">{{ resource }}</option>
                                {% endfor %} </select>
                                <input type="submit" class="btn btn-primary" />
                            </form>
                        </td>
                        {% endif %}
                        <td> <button class='btn btn-outline-dark' onclick='discoverActivityTree({{value}})'>Discover
                                Process</button> </td>
                        <td> <button class='btn btn-outline-dark' onclick='caseFiltering({{value}})'>3D Scatter</button>
                        </td>
                    </tr>
                    {% endfor %}
                </table>
            </div>
            <div class="row">
                <div class="col">
                    <button class="btn btn-secondary" onclick="discoverAll()" disabled>Discover All!</button>
                </div>
                <div class="col"><button class="btn btn-secondary" onclick="discoverAllPerformance()" disabled>Discover
                        All Performance!</button></div>
                <div class="col"><button class="btn btn-secondary" onclick="scatterAll()" disabled>Scatter
                        All!</button></div>
            </div>
        </div>

        <div class="col">
            <div class="row">

                <div class="col">
                    <div id="mynetwork"></div>
                </div>
                <div class="col">
                    <div id="scatter"></div>
                </div>

            </div>
            <div class="row">
                <div id="heatmap"></div>
            </div>
            <div class="row">
                <div id="scatter3d"></div>
            </div>

        </div>

        <div class="row">
            <div class="col">

            </div>

        </div>
        {% endif %}

    </div>
</body>

</html>